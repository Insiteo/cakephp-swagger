<?php
namespace Alt3\Swagger\Controller;

use Cake\Cache\Cache;
use Cake\Controller\Controller;
use Cake\Core\Configure;
use Cake\Core\Exception;
use Cake\Filesystem\File;

class SwaggerController extends Controller
{

    public function index()
    {
        echo 'woot';
        die();
    }


    /*
     * @var name of the swagger file (used in production mode)
     */
    protected $swaggerFile = 'swagger.json';

    /**
    @SWG\Info(
    title="Swagger-PHP with CakePHP 3",
    description="The best thing since sliced bread",
    termsOfService="http://swagger.io/terms/",
    version="1.0.0",
    )

    @SWG\Parameter(
    name="country",
    description="Limit results to entities related to this Country",
    in="query",
    required=false,
    type="integer"
    )
    @SWG\Parameter(
    name="culture",
    description="Limit results to entities related to this Culture",
    in="query",
    required=false,
    type="integer"
    )
    @SWG\Parameter(
    name="q",
    description="Search keywords",
    in="query",
    required=false,
    type="string"
    )
    @SWG\Parameter(
    name="page",
    description="Pagination page",
    in="query",
    required=false,
    type="integer"
    )
    @SWG\Parameter(
    name="limit",
    description="Limit results per page",
    in="query",
    required=false,
    type="integer"
    )
    @SWG\Parameter(
    name="direction",
    description="Sort order (only works in combination with sort parameter)",
    in="query",
    required=false,
    type="string",
    enum={"asc", "desc"}
    )
    @SWG\Parameter(
    parameter="id-int",
    name="id",
    description="ID of the entity to fetch",
    in="path",
    type="integer",
    required=true
    )
    @SWG\Parameter(
    parameter="id-uuid",
    name="id",
    description="UUID of the entity to fetch",
    in="path",
    type="string",
    format="uuid",
    required=true
    )
     *
     *
     * Swagger index for public API.
     *
     * @return void
     * @throws \Cake\Core\Exception
     */
    public function description()
    {
        // respond with json
        header('Content-Type: application/json');

        // debug mode: crawl directory in real-time
        $swagger = \Swagger\scan(ROOT . DS . 'src', [
            'exclude' => [
                '/Editor/'
            ]
        ]);
        echo $swagger;
        exit(0);
    }
}
